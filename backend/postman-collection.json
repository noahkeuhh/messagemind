{
  "info": {
    "name": "AI Flirt Studio API",
    "description": "Complete API collection for AI Flirt Studio backend",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3001/api",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "your_supabase_jwt_token_here",
      "type": "string"
    },
    {
      "key": "adminApiKey",
      "value": "your_admin_api_key_here",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "your_user_id_here",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": ["{{baseUrl}}"],
          "path": ["health"]
        }
      }
    },
    {
      "name": "User",
      "item": [
        {
          "name": "Get Credits",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/user/credits",
              "host": ["{{baseUrl}}"],
              "path": ["user", "credits"]
            }
          }
        },
        {
          "name": "Execute Action - Short Chat",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action_type\": \"short_chat\",\n  \"input_text\": \"Hey, how are you?\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user/action",
              "host": ["{{baseUrl}}"],
              "path": ["user", "action"]
            }
          }
        },
        {
          "name": "Execute Action - Image Analysis",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action_type\": \"image_analysis\",\n  \"image_url\": \"https://example.com/screenshot.png\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user/action",
              "host": ["{{baseUrl}}"],
              "path": ["user", "action"]
            }
          }
        },
        {
          "name": "Buy Credit Pack",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pack_id\": \"pack_120\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user/buy_pack",
              "host": ["{{baseUrl}}"],
              "path": ["user", "buy_pack"]
            }
          }
        },
        {
          "name": "Buy Quick Pack",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pack_id\": \"pack_50\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user/buy_quick_pack",
              "host": ["{{baseUrl}}"],
              "path": ["user", "buy_quick_pack"]
            }
          }
        },
        {
          "name": "Get History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/user/history?limit=20&offset=0",
              "host": ["{{baseUrl}}"],
              "path": ["user", "history"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "offset",
                  "value": "0"
                }
              ]
            }
          }
        },
        {
          "name": "Get Analysis by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/user/analysis/:id",
              "host": ["{{baseUrl}}"],
              "path": ["user", "analysis", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "analysis_id_here"
                }
              ]
            }
          }
        },
        {
          "name": "Save Reply",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reply_text\": \"Great suggestion!\",\n  \"reply_type\": \"Direct\",\n  \"analysis_id\": \"optional_analysis_id\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user/save_reply",
              "host": ["{{baseUrl}}"],
              "path": ["user", "save_reply"]
            }
          }
        },
        {
          "name": "Get Saved Replies",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/user/saved_replies",
              "host": ["{{baseUrl}}"],
              "path": ["user", "saved_replies"]
            }
          }
        }
      ]
    },
    {
      "name": "Subscription",
      "item": [
        {
          "name": "Create Subscription",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tier\": \"pro\",\n  \"interval\": \"month\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user/subscribe",
              "host": ["{{baseUrl}}"],
              "path": ["user", "subscribe"]
            }
          }
        },
        {
          "name": "Cancel Subscription",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"immediate\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user/cancel_subscription",
              "host": ["{{baseUrl}}"],
              "path": ["user", "cancel_subscription"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin",
      "item": [
        {
          "name": "Get Metrics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-admin-api-key",
                "value": "{{adminApiKey}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/metrics?date_from=2024-01-01&date_to=2024-01-31",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "metrics"],
              "query": [
                {
                  "key": "date_from",
                  "value": "2024-01-01"
                },
                {
                  "key": "date_to",
                  "value": "2024-01-31"
                }
              ]
            }
          }
        },
        {
          "name": "List Users",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-admin-api-key",
                "value": "{{adminApiKey}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users?limit=50&offset=0",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users"],
              "query": [
                {
                  "key": "limit",
                  "value": "50"
                },
                {
                  "key": "offset",
                  "value": "0"
                }
              ]
            }
          }
        },
        {
          "name": "Adjust Credits",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "x-admin-api-key",
                "value": "{{adminApiKey}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"{{userId}}\",\n  \"amount\": 100,\n  \"reason\": \"Promotional bonus\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/adjust_credits",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "adjust_credits"]
            }
          }
        }
      ]
    },
    {
      "name": "Webhooks",
      "item": [
        {
          "name": "Stripe Webhook",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "stripe-signature",
                "value": "stripe_signature_here",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"checkout.session.completed\",\n  \"data\": {\n    \"object\": {\n      \"id\": \"cs_test_...\",\n      \"client_reference_id\": \"user_id\",\n      \"metadata\": {\n        \"pack_id\": \"pack_120\",\n        \"credits\": \"120\"\n      }\n    }\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/webhook/stripe",
              "host": ["{{baseUrl}}"],
              "path": ["webhook", "stripe"]
            }
          }
        }
      ]
    }
  ]
}



